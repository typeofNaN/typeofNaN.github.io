(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[693],{2634:()=>{},3224:(e,t,n)=>{"use strict";n.d(t,{sK:()=>R,ZL:()=>N});var s=n(3464);let a="DEFAULT",o="请求错误~",i="ECONNABORTED",r="NETWORK_ERROR",c="网络不可用~",u={400:"400: 请求出现语法错误~",401:"401: 用户未授权~",403:"403: 服务器拒绝访问~",404:"404: 请求的资源不存在~",405:"405: 请求方法未允许~",408:"408: 网络请求超时~",500:"500: 服务器内部错误~",501:"501: 服务器未实现请求功能~",502:"502: 错误网关~",503:"503: 服务不可用~",504:"504: 网关超时~",505:"505: http版本不支持该请求~",[a]:o},l=[],d=[66666],p={array:"[object Array]",file:"[object File]"};function g(e){return Object.prototype.toString.call(e)}function f(e){return g(e)===p.array}function h(e){return g(e)===p.file}var m=n(6052),y=n(1380),w=n.n(y);async function b(e,t){let n=e;return"application/x-www-form-urlencoded"===t&&(n=(0,m.stringify)(e)),"multipart/form-data"===t&&(n=await C(e)),n}async function C(e){let t=new(w());return Object.entries(e).forEach(async e=>{let[n,s]=e;h(s)||f(s)&&s.length&&h(s[0])?await j(t,n,s):t.append(n,s)}),t}async function j(e,t,n){f(n)?await Promise.all(n.map(n=>(e.append(t,n),!0))):e.append(t,n)}let O=new Map([]);function v(e){!e.msg||l.includes(e.code)||O.has(e.code)||(O.set(e.code,e.msg),setTimeout(()=>{O.delete(e.code)},3e3))}function E(e){let t={type:"axios",code:a,msg:o};return[[!window.navigator.onLine||"Network Error"===e.message,()=>{Object.assign(t,{code:r,msg:c})}],[e.code===i&&e.message.includes("timeout"),()=>{Object.assign(t,{code:i,msg:"请求超时~"})}],[!!e.response,()=>{var n;let s=(null==(n=e.response)?void 0:n.status)||"DEFAULT",a=u[s];Object.assign(t,{code:s,msg:a})}]].some(e=>{let[t,n]=e;return t&&n(),t}),v(t),t}async function k(e,t){return e?{error:e,data:null}:{error:null,data:t}}class A{setInterceptor(){this.instance.interceptors.request.use(async e=>{let t={...e};if(t.headers){let e=t.headers["Content-Type"];t.data=await b(t.data,e)}return t},e=>k(E(e),null)),this.instance.interceptors.response.use(async e=>{let{status:t,config:n}=e;if(200===t||t<300||304===t){let t=e.data,{codeKey:s,dataKey:a,successCode:o}=this.backendConfig;return t[s]===o?k(null,t[a]):d.includes(t[s])?new Promise(e=>{this.retryQueues.push(t=>{var s;n.headers.Authorization=null==(s=t.headers)?void 0:s.Authorization,e(this.instance.request(n))})}):k(function(e,t){let{codeKey:n,msgKey:s}=t,a={type:"backend",code:e[n],msg:e[s]};return v(a),a}(t,this.backendConfig),null)}return k(function(e){let t={type:"axios",code:a,msg:o};if(window.navigator.onLine){let n=e.status,s=u[n]||o;Object.assign(t,{type:"http",code:n,msg:s})}else Object.assign(t,{code:r,msg:c});return v(t),t}(e),null)},e=>k(E(e),null))}constructor(e,t={codeKey:"code",dataKey:"data",msgKey:"message",successCode:200}){this.backendConfig=t,this.instance=s.A.create(e),this.setInterceptor(),this.isRefreshing=!1,this.retryQueues=[]}}async function L(e){let t,{instance:n,method:s,url:a,data:o,config:i}=e;return"get"===s||"delete"===s?await n[s](a,i):await n[s](a,o,i)}let x=function(e,t){let n=new A(e,void 0);async function s(e){let{url:t}=e,s=e.method||"get",{instance:a}=n;return await L({instance:a,method:s,url:t,data:e.data,config:e.axiosConfig})}return{get:function(e,t){return s({url:e,method:"get",axiosConfig:t})},post:function(e,t,n){return s({url:e,method:"post",data:t,axiosConfig:n})},put:function(e,t,n){return s({url:e,method:"put",data:t,axiosConfig:n})},delete:function(e,t){return s({url:e,method:"delete",axiosConfig:t})}}}({baseURL:"https://api.typeofnan.cn/api/v1/web"});class R{static getPhotoAlbumList(){return x.get("/photo-album")}static async getMediaListByPhotoAlbumId(e){return x.get("/photo-album/".concat(e))}}class N{static getProjectGroupList(){return x.get("/project-group")}}}}]);